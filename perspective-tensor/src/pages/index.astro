---
import BaseLayout from '../layouts/BaseLayout.astro';
import StructuredData from '../components/StructuredData.astro';
import AnimationCanvas from '../react/components/AnimationCanvas.tsx';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog', ({ data }) => data.draft !== true);

// Sort posts by date (newest first)
posts.sort((a, b) => {
  const dateA = a.data.pubDate || new Date(0);
  const dateB = b.data.pubDate || new Date(0);
  return dateB.getTime() - dateA.getTime();
});

const websiteData = {
  name: "Perspective Tensor",
  description: "Personal blog exploring AI, machine learning, complexity theory, and data science through a first principles lens.",
  url: "https://perspective-tensor.dev",
  author: {
    "@type": "Person",
    name: "Lin Wang",
    url: "https://perspective-tensor.dev"
  },
  potentialAction: {
    "@type": "SearchAction",
    target: "https://perspective-tensor.dev/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
};
---
<BaseLayout title="Home">
  <StructuredData type="WebSite" data={websiteData} />
  <div class="flex flex-col items-center justify-center min-h-[calc(100vh-12rem)] w-full max-w-3xl mx-auto px-4 gap-6">
    <AnimationCanvas client:load />
    <p class="text-lg md:text-xl text-gray-700 dark:text-gray-200 leading-relaxed font-light tracking-wide text-center">
      Finding patterns in chaos, where simple rules create profound complexity.
    </p>
  </div>
</BaseLayout>